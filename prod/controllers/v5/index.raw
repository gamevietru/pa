window.__require=function n(t,e,i){function r(o,c){if(!e[o]){if(!t[o]){var a=o.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+o+"'")}o=a}var f=e[o]={exports:{}};t[o][0].call(f.exports,function(n){return r(t[o][1][n]||n)},f,f.exports,n,t,e,i)}return e[o].exports}for(var s="function"==typeof __require&&__require,o=0;o<i.length;o++)r(i[o]);return r}({PAAds:[function(n,t,e){"use strict";cc._RF.push(t,"81f24AUGsVMvY2VK5D4Xbup","PAAds");n("PAManager"),n("PAJS");var i=n("PAUI");cc.Class({extends:cc.Component,onLoad:function(){i.size(this.node,i.size(i.parent(this.node)))},showAsync:function(){var n=this;return new Promise(function(t,e){i.on(n.node,"done",t)})},setDataAsync:function(n){return this.data=n,this.updateDataAsync(n)},updateDataAsync:function(){return Promise.resolve()},onClick:function(){i.emit(this.node,"click")},onSwitch:function(){i.emit(this.node,"switch")},onCancel:function(){i.emit(this.node,"cancel")},onPlay:function(){var n=this;if(!this._switching){this._switching=!0,this.onClick();var t={"game-id":this.data.src};FBInstant.switchGameAsync(this.data.app.id,t).then(function(){n.onSwitch()},function(t){n.onCancel()}).finally(function(){n._switching=!1})}}}),cc._RF.pop()},{PAJS:"PAJS",PAManager:"PAManager",PAUI:"PAUI"}],PABanners:[function(n,t,e){"use strict";cc._RF.push(t,"f5bc90TKm9MhJuyV/ICcK+0","PABanners");n("PAConfigs");var i=n("PAJS"),r=n("PAUI");cc.Class({extends:cc.Component,ctor:function(){this.prefabs={}},setManager:function(n){this.manager=n},loadAsync:function(n){var t=this;if(void 0===n&&(n=null),this.instance)return Promise.resolve(this.instance);if(this.loading)return Promise.reject({reason:"PA_BANNER_LOADING"});var e=this.manager.configs;if(!e)return Promise.reject({reason:"PA_NOT_INITIALIZED"});var i=e.getNext("banner");return n&&(i=n),i?(this.loading=!0,this.createPrefabAsync(i).then(function(n){t.instance=n,r.emit(t.node,"ready",n)}).finally(function(){return t.loading=!1})):Promise.reject({reason:"PA_BANNER_NOT_AVAILABLE"})},showAsync:function(){if(!this.instance)return Promise.reject({reason:"PA_BANNER_NOT_LOADED"});var n=this.instance,t=n.data.id;return this.instance=null,this.loadAsync(),this.manager.onShow(t,"banner"),FBInstant.logEvent("PA_BANNER_SHOW",0,{id:t}),r.clear(this.node),r.add(n.node,this.node),n.showAsync()},createPrefabAsync:function(n){var t=this,e=this.getPrefabPath(n.template);return this.loadPrefabAsync(e).then(function(e){var i=r.create(e,"PABanner");return r.on(i.node,"click",function(){t.manager.onClick(i.data.id,"banner"),FBInstant.logEvent("PA_BANNER_CLICK",0,{id:i.data.id})}),r.on(i.node,"cancel",function(){FBInstant.logEvent("PA_BANNER_CANCEL",0,{id:i.data.id})}),i.setDataAsync(n).then(function(){return i})})},getPrefabPath:function(n){return i.isString(n)&&!n.startsWith("http")?i.format("banners/%s",n):"prefabs/pa-banner"},loadPrefabAsync:function(n){var t=this;return this.prefabs[n]?Promise.resolve(this.prefabs[n]):this.manager.bundle.loadAsync(n,cc.Prefab).then(function(e){return t.prefabs[n]=e})}}),cc._RF.pop()},{PAConfigs:"PAConfigs",PAJS:"PAJS",PAUI:"PAUI"}],PABanner:[function(n,t,e){"use strict";cc._RF.push(t,"e18efRQc1tDw59VLWzU39x1","PABanner");var i=n("PAUI");cc.Class({extends:n("PAAds"),properties:{bg:cc.Sprite,effect:sp.Skeleton,screenshot:cc.Sprite},onLoad:function(){i.hide(this.screenshot.node)},showAsync:function(){return i.scaleX(this.effect.node,i.size(this.node).width/750),this._super()},updateDataAsync:function(n){var t=this;return n.configs["banner-preview"]&&n.app.inter&&i.spriteAsync(this.screenshot,n.app.inter.image).then(function(){t.hasScreenshot=!0}),i.spriteAsync(this.bg,n.app.banner)},onPlay:function(){!this._switching&&this.hasScreenshot&&this.showScreenshot(),this._super()},showScreenshot:function(){var n=this.screenshot.node,t=cc.director.getScene(),e=cc.winSize,r=i.size(n),s=e.width/r.width,o=e.height/r.height;i.add(n,t),i.pos(n,cc.v2(e.width/2,e.height/2)),i.scale(n,cc.v2(Math.max(o,s),o)),i.show(n),i.opacity(n,0),i.action(n,cc.fadeIn(.5))},onClose:function(){i.remove(this.screenshot.node),i.emit(this.node,"done")},onCancel:function(){this._super(),this.onClose()},onSwitch:function(){this._super(),this.onClose()}}),cc._RF.pop()},{PAAds:"PAAds",PAUI:"PAUI"}],PAConfigs:[function(n,t,e){"use strict";cc._RF.push(t,"8e882nxnuRNX6+kD+jplXXk","PAConfigs");var i=n("PAJS"),r=n("PASettings");cc.Class({ctor:function(n){this.setData(n)},setData:function(n){var t=this._getRemote(n);this.local=this._loadLocal(),this.local&&this.local.apps&&this.local.version==t.data.version||(this.resetCount(),this.resetRates(),this.local={version:t.data.version,apps:t.apps},this.saveLocal()),t.data&&(this.local.id=t.data.id,this.local.templates=t.data.templates),this.local.configs=t.configs},resetCount:function(){r.remove("pa-inter-count"),r.remove("pa-inter-date")},resetRates:function(){r.remove("pa-data")},getSrcId:function(){return this.local.id},getNext:function(){var n=i.rndKey(this.local.apps,function(n,t){return n[t]});if(n){var t=this.local.templates[n];if(t)return{src:this.local.id,id:n,app:t,configs:this.local.configs}}},updateInterCount:function(){var n=r.getNum("pa-inter-date"),t=i.today();return n!=t&&(r.set("pa-inter-count",0),r.set("pa-inter-date",t)),r.inc("pa-inter-count")},getInterCount:function(){return r.getNum("pa-inter-count")},checkInterTurn:function(){var n=r.getNum("pa-inter-count"),t=this.local.configs["inter-index"];return{count:n,turns:t,isTurn:t&&t.includes(n)}},updateAppRate:function(n,t){n&&(this.local.apps[n]*=1-t,this.saveLocal())},hasInter:function(){return this.hasAd("inter")},hasBanner:function(){return this.hasAd("banner")},hasVideo:function(){return this.hasAd("video")},hasAd:function(n){return!this.local.configs[i.format("no-%s",n)]},onShow:function(n,t){this.updateAppRate(n,this.local.configs[i.format("%s-show",t)]||0)},onClick:function(n,t){this.updateAppRate(n,this.local.configs[i.format("%s-click",t)]||0)},onCancel:function(n,t){},saveLocal:function(){var n=Number.MAX_SAFE_INTEGER;if(i.each(this.local.apps,function(t,e){e>0&&n>e&&(n=e)}),n<.5)for(var t in this.local.apps)this.local.apps[t]*=2;r.set("pa-data",this.local)},_loadLocal:function(){return r.getJson("pa-data")},_getRemote:function(n){var t=this._getSet(n);return{set:t,data:n,apps:n.sets&&(n.sets[t]||n.sets.default),configs:n.configs&&(n.configs[t]||n.configs.default)}},_getSet:function(n){if(n.rules)for(var t in n.rules)if(this._matchRule(n.rules[t]))return n.rules[t].set||t},_matchRule:function(n){for(var t in n){var e=this._getUserValue(t),r=i.isArray(n[t])?n[t]:[n[t]];if(e&&!r.includes(e))return!1}return!0},_getUserValue:function(n){switch(n){case"locale":return FBInstant.getLocale();case"lang":return FBInstant.getLocale().split("_").first();case"country":return FBInstant.getLocale().split("_").last();case"user":return FBInstant.player.getID()}}}),cc._RF.pop()},{PAJS:"PAJS",PASettings:"PASettings"}],PAInters:[function(n,t,e){"use strict";cc._RF.push(t,"434406Is8NH5a+JngPOjGhe","PAInters");var i=n("PAJS"),r=n("PAUI");cc.Class({extends:cc.Component,ctor:function(){this.prefabs={}},setManager:function(n){this.manager=n},loadAsync:function(){var n=this;if(this.instance)return Promise.resolve(this.instance);if(this.loading)return Promise.reject({reason:"PA_INTER_LOADING"});var t=this.manager.configs;if(!t)return Promise.reject({reason:"PA_NOT_INITIALIZED"});var e=t.getNext("inter");return e?(this.loading=!0,this.createPrefabAsync(e).then(function(t){n.instance=t,r.emit(n.node,"ready",t)}).finally(function(){return n.loading=!1})):Promise.reject({reason:"PA_INTER_NOT_AVAILABLE"})},showAsync:function(){if(!this.instance)return Promise.reject({reason:"PA_INTER_NOT_LOADED"});var n=this.instance,t=n.data.id;return this.instance=null,this.loadAsync(),this.manager.onShow(t,"inter"),FBInstant.logEvent("PA_INTER_SHOW",0,{id:t,count:this.manager.configs.getInterCount()}),r.clear(this.node),r.add(n.node,this.node),n.showAsync()},createPrefabAsync:function(n){var t=this,e=this.getPrefabPath(n.template);return this.loadPrefabAsync(e).then(function(e){var i=r.create(e,"PAInter");return r.on(i.node,"click",function(){t.manager.onClick(i.data.id,"inter"),FBInstant.logEvent("PA_INTER_CLICK",0,{id:i.data.id})}),r.on(i.node,"cancel",function(){FBInstant.logEvent("PA_INTER_CANCEL",0,{id:i.data.id})}),i.setDataAsync(n).then(function(){return i})})},getPrefabPath:function(n){return i.isString(n)&&!n.startsWith("http")?i.format("inters/%s",n):"prefabs/pa-inter"},loadPrefabAsync:function(n){var t=this;return this.prefabs[n]?Promise.resolve(this.prefabs[n]):this.manager.bundle.loadAsync(n,cc.Prefab).then(function(e){return t.prefabs[n]=e})}}),cc._RF.pop()},{PAJS:"PAJS",PAUI:"PAUI"}],PAInter:[function(n,t,e){"use strict";cc._RF.push(t,"b2d92hgAz1FO6Hp6fCN+d09","PAInter");n("PAManager");var i=n("PAJS"),r=n("PAUI");cc.Class({extends:n("PAAds"),properties:{content:cc.Node,bg:cc.Sprite,play:cc.Sprite},updateDataAsync:function(n){var t=this,e=n.app.inter;if(e&&!i.isString(e)){var s=r.spriteAsync(this.bg,e.image),o=r.spriteAsync(this.play,e.play.image).then(function(){r.pos(t.play.node,cc.v2(e.play.x,e.play.y))});return Promise.all([s,o])}return Promise.resolve()},showAsync:function(){return this.updateLayout(),r.action(this.play.node,this.createAnimation()),this._super()},createAnimation:function(){return cc.repeatForever(cc.sequence(cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.delayTime(3)))},updateLayout:function(){var n=r.size(this.node),t=r.size(this.bg.node),e=n.width/t.width,i=n.height/t.height,s=n.width/n.height,o=(Math.min(e,i),t.height*s);r.size(this.content,cc.size(o,t.height)),r.scale(this.content,i),r.scale(this.bg.node,cc.v2(Math.max(o/t.width,1),1)),r.pos(this.node,cc.v2(0,0))},onClose:function(){r.emit(this.node,"done"),r.remove(this.node)},onCancel:function(){this._super(),this.onClose()},onSwitch:function(){this._super(),this.onClose()}}),cc._RF.pop()},{PAAds:"PAAds",PAJS:"PAJS",PAManager:"PAManager",PAUI:"PAUI"}],PAJS:[function(n,t,e){"use strict";cc._RF.push(t,"bbff3M0z0dPg5+YQsZCwJVd","PAJS"),t.exports={format:function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];var r=0;return n.replace(/\%s/g,function(n){return e[r++]})},now:function(){return(new Date).getTime()/1e3},today:function(){var n=new Date;return n.setHours(0,0,0,0),n.getTime()/1e3},string:function(n){return""+n},number:function(n){return 1*n||0},bool:function(n){return!0===n||1===n||"true"===n||"1"===n},isBool:function(n){return"boolean"==typeof n},isDefined:function(n){return void 0!==n},isFunction:function(n){return"function"==typeof n},isNumber:function(n){return"number"==typeof n},isString:function(n){return"string"==typeof n},isArray:function(n){return n instanceof Array},isEmpty:function(n){return!n||0==n.length},isType:function(n,t){return n instanceof t},each:function(n,t){return this.isArray(n)?this._eachArray(n,t):this._eachObj(n,t)},_eachArray:function(n,t){for(var e=[],i=0;i<n.length;i++)e.push(t(n[i],i));return e},_eachObj:function(n,t){var e=[];for(var i in n)e.push(t(i,n[i]));return e},sum:function(n,t){for(var e=0,i=0;i<n.length;i++)e+=t?t(n[i],i):n[i];return e},rnd:function(){var n=Math.random();switch(arguments.length){case 1:return n*(arguments.length<=0?void 0:arguments[0]);case 2:return(arguments.length<=0?void 0:arguments[0])+((arguments.length<=1?void 0:arguments[1])-(arguments.length<=0?void 0:arguments[0]))*n;default:return n}},rndBool:function(n){return void 0===n&&(n=.5),this.rnd()<n},rndInt:function(n,t){return n+Math.floor(this.rnd()*(t+1-n))},rndItem:function(n){return n[this.rndInt(0,n.length-1)]},rndKey:function(n,t){var e=[],i=[];for(var r in n)i.push(r),e.push(t?t(n,r):100);return i[this.rndChance(e)]},rndValue:function(n){return n[this.rndKey(n)]},rndChance:function(n){for(var t=this.sum(n),e=this.rnd(t),i=0,r=0;r<n.length;r++)if(e<(i+=n[r]))return r;return n.length-1},loop:function(n,t){for(var e=[],i=0;i<n;i++)e.push(t(i));return e},first:function(n,t){return this.isFunction(t)?this.first(this.where(n,t)):this.isNumber(t)?this.take(n,t):n.length>0?n[0]:void 0},take:function(n,t){return n.slice(0,t)},where:function(n,t){for(var e=[],i=0;i<n.length;i++)t&&!t(n[i],i)||e.push(n[i]);return e}},cc._RF.pop()},{}],PAManager:[function(n,t,e){"use strict";cc._RF.push(t,"18b19tsJmtIOLt0vsHIIxs+","PAManager");var i=n("PAConfigs"),r=n("PAResources"),s=(n("PAJS"),n("PAUI"));cc.Class({extends:cc.Component,properties:{inters:cc.Prefab,banners:cc.Prefab,videos:cc.Prefab},createInters:function(n){var t=s.create(this.inters,"PAInters");return t.setManager(this),n&&s.add(t.node,n),t},createBanners:function(n){var t=s.create(this.banners,"PABanners");return t.setManager(this),n&&s.add(t.node,n),t},createVideos:function(n){var t=s.create(this.videos,"PAVideos");return t.setManager(this),n&&s.add(t.node,n),t},resetCount:function(){this.configs&&this.configs.resetCount()},resetRates:function(){this.configs&&this.configs.resetRates()},setBundle:function(n){this.bundle=n},loadAsync:function(n){var t=this;return r.loadJsonAsync(n).then(function(n){return n.disabled||(t.configs=new i(n)),t.configs})},onShow:function(n,t){this.configs&&this.configs.onShow(n,t)},onClick:function(n,t){this.configs&&this.configs.onClick(n,t)},onCancel:function(n,t){this.configs&&this.configs.onCancel(n,t)}});cc._RF.pop()},{PAConfigs:"PAConfigs",PAJS:"PAJS",PAResources:"PAResources",PAUI:"PAUI"}],PAResources:[function(require,module,exports){"use strict";function parseParameters(n,t,e){if(void 0===e){var i="function"==typeof n;t?(e=t,i||(t=null)):void 0===t&&i&&(e=n,n=null,t=null),void 0!==t&&i&&(t=n,n=null)}return{options:n=n||Object.create(null),onProgress:t,onComplete:e}}function downloadAjax(n,t,e,i){var r=parseParameters(t,e,i),s=(t=r.options,e=r.onProgress,i=r.onComplete,"download failed: "+n+", status: "),o=new XMLHttpRequest;if(o.open("GET",n,!0),void 0!==t.responseType&&(o.responseType=t.responseType),void 0!==t.withCredentials&&(o.withCredentials=t.withCredentials),void 0!==t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),void 0!==t.timeout&&(o.timeout=t.timeout),t.header)for(var c in t.header)o.setRequestHeader(c,t.header[c]);return e&&(o.onprogress=function(n){n.lengthComputable&&e(n.loaded,n.total)}),i&&(o.onload=function(){200===o.status||0===o.status?i(null,o.response):i(new Error(s+o.status+"(no response)"))},o.onerror=function(){i(new Error(s+o.status+"(error)"))},o.ontimeout=function(){i(new Error(s+o.status+"(time out)"))},o.onabort=function(){i(new Error(s+o.status+"(abort)"))}),o.send(null),o}cc._RF.push(module,"13ed6lPvNBLoKT3exkj0OJ7","PAResources"),module.exports={loadAsync:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return new Promise(function(n,e){var i;(i=cc.loader).load.apply(i,t.concat([function(t,i){t?e(t):n(i)}]))})},loadResAsync:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return new Promise(function(n,e){var i;(i=cc.loader).loadRes.apply(i,t.concat([function(t,i){t?e(t):n(i)}]))})},loadAjaxAsync:function(n){return new Promise(function(t,e){downloadAjax(n,function(n,i){n?e(n):t(i)})})},loadJsonAsync:function(n){return this.loadAjaxAsync(n).then(function(n){return JSON.parse(n)})},loadScriptAsync:function loadScriptAsync(url){return this.loadAjaxAsync(url).then(function(d){return eval(d)})},_bundles:{},loadBundleAsync:function(n){return n.startsWith("http")?this.loadRemoteBundleAsync(n):new Promise(function(t,e){cc.assetManager.loadBundle(n,function(n,i){n?e(n):t(i)})})},loadRemoteBundleAsync:function(n){var t=this;if(this._bundles[n])return Promise.resolve(this._bundles[n]);var e=null,i=this.loadJsonAsync(cc.path.join(n,"config.json")).then(function(t){(e=t).base=n+"/"}),r=this.loadScriptAsync(cc.path.join(n,"index.raw"));return Promise.all([i,r]).then(function(){return t._createBundleAsync(e).then(function(e){return t._bundles[n]=e})})},_createBundleAsync:function(n){var t=new cc.AssetManager.Bundle;return t.init(n),t.loadAsync=function(){for(var n=this,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new Promise(function(t,i){n.load.apply(n,e.concat([function(n,e){n?i(n):t(e)}]))})},t.loadAsync("images/externals").then(function(n){return t._config.externals=n.json,t}).catch(function(){return t})}},cc._RF.pop()},{}],PASettings:[function(n,t,e){"use strict";cc._RF.push(t,"dce59VYI+hJ6oymi2vxCNik","PASettings");var i=n("PAJS");t.exports={has:function(n){return null!==cc.sys.localStorage.getItem(n)},getItem:function(n){var t=cc.sys.localStorage.getItem(n);return null===t?void 0:t},get:function(n,t){void 0===t&&(t="");var e=this.getItem(n);return i.isDefined(e)?e:t},getBool:function(n,t){void 0===t&&(t=!1);var e=this.getItem(n);return i.isDefined(e)?i.bool(e):t},getNum:function(n,t){void 0===t&&(t=0);var e=this.getItem(n);return i.isDefined(e)?i.number(e):t},getJson:function(n,t){var e=this.getItem(n);return e?i.isString(e)?JSON.parse(e):e:t},set:function(n,t){return void 0===t?cc.sys.localStorage.removeItem(n):i.isBool(t)?cc.sys.localStorage.setItem(n,t?"1":""):i.isNumber(t)||i.isString(t)?cc.sys.localStorage.setItem(n,t):cc.sys.localStorage.setItem(n,JSON.stringify(t)),t},inc:function(n){return this.set(n,this.getNum(n,0)+1)},remove:function(n){cc.sys.localStorage.removeItem(n)}},cc._RF.pop()},{PAJS:"PAJS"}],PAUI:[function(n,t,e){"use strict";cc._RF.push(t,"2016bwNGbNCaoeU4r1DmxF6","PAUI");var i=n("PAJS"),r=n("PAResources");t.exports={create:function(n,t){var e=cc.instantiate(n);return t?this.component(e,t):e},parent:function(n,t){if(!i.isDefined(t))return n.getParent();n.setParent(t)},component:function(n,t,e){var i=n.getComponent(t);return!i&&e&&(i=new t,n.addComponent(i)),i},add:function(n,t){return n.parent?n.parent=t:t.addChild(n),n},remove:function(n,t){void 0===t&&(t=!0),n.removeFromParent(t)},clear:function(n,t){void 0===t&&(t=!0),n.removeAllChildren(t)},emit:function(n,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),r=2;r<e;r++)i[r-2]=arguments[r];n.emit.apply(n,[t].concat(i))},on:function(n,t,e){n.on(t,e)},opacity:function(n,t){if(!i.isDefined(t))return n.opacity;n.opacity=t<=1?255*t:t},pos:function(n,t){if(!i.isDefined(t))return n.getPosition();n.setPosition(t)},size:function(n,t){if(!i.isDefined(t))return n.getContentSize();n.setContentSize(t)},scale:function(n,t){if(!i.isDefined(t))return n.scale;n.scale=t},scaleX:function(n,t){if(!i.isDefined(t))return n.scaleX;n.scaleX=t},scaleY:function(n,t){if(!i.isDefined(t))return n.scaleY;n.scaleY=t},sprite:function(n,t,e){i.isString(t)?r.loadAsync(t).then(function(t){n.spriteFrame=new cc.SpriteFrame(t),e&&e()}):i.isType(t,cc.SpriteFrame)?(n.spriteFrame=t,e&&e()):e&&e()},spriteAsync:function(n,t){var e=this;return new Promise(function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e.sprite.apply(e,[n,t].concat(r))})},loadAsync:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return new Promise(function(n,e){var i;(i=cc.loader).load.apply(i,t.concat([function(t,i){t?e(t):n(i)}]))})},action:function(n,t){n.runAction(t)},show:function(n,t){void 0===t&&(t=!0),n.active=t},hide:function(n){n.active=!1}},cc._RF.pop()},{PAJS:"PAJS",PAResources:"PAResources"}],PAVideos:[function(n,t,e){"use strict";cc._RF.push(t,"4f68cSXwohAH75luL+FgBgc","PAVideos");var i=n("PAJS"),r=n("PAUI");cc.Class({extends:cc.Component,ctor:function(){this.prefabs={}},setManager:function(n){this.manager=n},loadAsync:function(){var n=this;if(this.instance)return Promise.resolve(this.instance);if(this.loading)return Promise.reject({reason:"PA_VIDEO_LOADING"});var t=this.manager.configs;if(!t)return Promise.reject({reason:"PA_NOT_INITIALIZED"});var e=t.getNext("video");return this.next=e,e?(this.loading=!0,this.createPrefabAsync(e).then(function(t){n.instance=t,r.emit(n.node,"ready",t)}).catch(function(t){n.instance=null}).finally(function(){n.loading=!1})):Promise.reject({reason:"PA_VIDEO_NOT_AVAILABLE"})},getNext:function(){return this.next},showAsync:function(){if(!this.instance)return Promise.reject({reason:"PA_VIDEO_NOT_LOADED"});var n=this.instance,t=n.data.id;return this.instance=null,this.loadAsync(),this.manager.onShow(t,"video"),FBInstant.logEvent("PA_VIDEO_SHOW",0,{id:t}),r.clear(this.node),r.add(n.node,this.node),n.playVideo(),n.showAsync()},createPrefabAsync:function(n){var t=this,e=this.getPrefabPath(n.template);return this.loadPrefabAsync(e).then(function(e){var i=r.create(e,"PAVideo");return r.on(i.node,"click",function(){t.manager.onClick(i.data.id,"video"),FBInstant.logEvent("PA_VIDEO_CLICK",0,{id:i.data.id})}),r.on(i.node,"cancel",function(){FBInstant.logEvent("PA_VIDEO_CANCEL",0,{id:i.data.id})}),i.setDataAsync(n).then(function(){return i})})},getPrefabPath:function(n){return i.isString(n)&&!n.startsWith("http")?i.format("videos/%s",n):"prefabs/pa-video"},loadPrefabAsync:function(n){var t=this;return this.prefabs[n]?Promise.resolve(this.prefabs[n]):this.manager.bundle.loadAsync(n,cc.Prefab).then(function(e){return t.prefabs[n]=e})}}),cc._RF.pop()},{PAJS:"PAJS",PAUI:"PAUI"}],PAVideo:[function(n,t,e){"use strict";cc._RF.push(t,"536a9ZpTiJCZZg7aDtlJuLT","PAVideo");var i=n("PAUI"),r=n("PAJS");cc.Class({extends:n("PAAds"),properties:{videoPlayer:cc.VideoPlayer},onVideoPlayerEvent:function(n,t){t===cc.VideoPlayer.EventType.CLICKED?(this.videoPlayer.isPlaying()&&this.videoPlayer.pause(),this.onPlay()):this.playVideo()},updateDataAsync:function(n){var t=n.app.video;return t&&r.isString(t)?(this.videoPlayer.remoteURL=t,this.videoPlayer.resourceType=cc.VideoPlayer.ResourceType.REMOTE,Promise.resolve()):Promise.reject()},playVideo:function(){this.videoPlayer.isPlaying()||this.videoPlayer.play()},onClose:function(){i.emit(this.node,"done")},onCancel:function(){this._super(),this.onClose()},onSwitch:function(){this._super(),this.onClose()}}),cc._RF.pop()},{PAAds:"PAAds",PAJS:"PAJS",PAUI:"PAUI"}]},{},["PAJS","PAResources","PASettings","PAUI","PAAds","PABanner","PABanners","PAConfigs","PAInter","PAInters","PAManager","PAVideo","PAVideos"]);