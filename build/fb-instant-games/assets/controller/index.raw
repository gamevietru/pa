window.__require=function t(n,e,r){function i(s,c){if(!e[s]){if(!n[s]){var a=s.split("/");if(a=a[a.length-1],!n[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var f=e[s]={exports:{}};n[s][0].call(f.exports,function(t){return i(n[s][1][t]||t)},f,f.exports,t,n,e,r)}return e[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<r.length;s++)i(r[s]);return i}({JS:[function(t,n,e){"use strict";cc._RF.push(n,"04f7fKovH5NQJt6dhSDvSbH","JS"),n.exports={format:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=0;return t.replace(/\%s/g,function(t){return e[i++]})},now:function(){return(new Date).getTime()/1e3},today:function(){var t=new Date;return t.setHours(0,0,0,0),t.getTime()/1e3},string:function(t){return""+t},number:function(t){return 1*t||0},bool:function(t){return!0===t||1===t||"true"===t||"1"===t},isBool:function(t){return"boolean"==typeof t},isDefined:function(t){return void 0!==t},isFunction:function(t){return"function"==typeof t},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},isArray:function(t){return t instanceof Array},isEmpty:function(t){return!t||0==t.length},isType:function(t,n){return t instanceof n},each:function(t,n){return this.isArray(t)?this._eachArray(t,n):this._eachObj(t,n)},_eachArray:function(t,n){for(var e=[],r=0;r<t.length;r++)e.push(n(t[r],r));return e},_eachObj:function(t,n){var e=[];for(var r in t)e.push(n(r,t[r]));return e},sum:function(t,n){for(var e=0,r=0;r<t.length;r++)e+=n?n(t[r],r):t[r];return e},rnd:function(){var t=Math.random();switch(arguments.length){case 1:return t*(arguments.length<=0?void 0:arguments[0]);case 2:return(arguments.length<=0?void 0:arguments[0])+((arguments.length<=1?void 0:arguments[1])-(arguments.length<=0?void 0:arguments[0]))*t;default:return t}},rndBool:function(t){return void 0===t&&(t=.5),this.rnd()<t},rndInt:function(t,n){return t+Math.floor(this.rnd()*(n+1-t))},rndItem:function(t){return t[this.rndInt(0,t.length-1)]},rndKey:function(t,n){var e=[],r=[];for(var i in t)r.push(i),e.push(n?n(t,i):100);return r[this.rndChance(e)]},rndChance:function(t){for(var n=this.sum(t),e=this.rnd(n),r=0,i=0;i<t.length;i++)if(e<(r+=t[i]))return i;return t.length-1}},cc._RF.pop()},{}],PAConfigs:[function(t,n,e){"use strict";cc._RF.push(n,"8e882nxnuRNX6+kD+jplXXk","PAConfigs");var r=t("JS"),i=t("Settings");cc.Class({ctor:function(t){this.setData(t)},setData:function(t){this.data=t,this.remote=this._getRemote(t),this.local=this._loadLocal(),this.local&&this.local.version==this.remote.version||(this.reset(),this.local=this.remote,this.saveLocal())},reset:function(){i.remove("pa-inter-count"),i.remove("pa-inter-date"),i.remove("pa-data")},getSrcId:function(){return this.local.id},loadInter:function(){var t=r.rndKey(this.local.apps,function(t,n){return t[n]});if(t){var n=this.local.templates[t];if(n)return{id:t,type:n.template||"template",data:n}}},updateInterCount:function(){var t=i.getNum("pa-inter-date"),n=r.today();return t!=n&&(i.set("pa-inter-count",0),i.set("pa-inter-date",n)),i.inc("pa-inter-count")},getInterCount:function(){return i.getNum("pa-inter-count")},checkInterTurn:function(){var t=i.getNum("pa-inter-count"),n=this.local.configs["inter-index"];return{count:t,turns:n,isTurn:n&&n.includes(t)}},updateAppRate:function(t,n){t&&(this.local.apps[t]*=1-n,this.saveLocal())},showIcon:function(t){this.updateAppRate(t,this.local.configs["icon-show"]||.01)},clickIcon:function(t){this.updateAppRate(t,this.local.configs["icon-click"]||.5)},showInter:function(t){this.updateAppRate(t,this.local.configs["inter-show"]||.1)},clickInter:function(t){this.updateAppRate(t,this.local.configs["inter-click"]||.5)},saveLocal:function(){var t=Number.MAX_SAFE_INTEGER;if(r.each(this.local.apps,function(n,e){e>0&&t>e&&(t=e)}),t<.5)for(var n in this.local.apps)this.local.apps[n]*=2;i.set("pa-data",this.local)},_loadLocal:function(){return i.getJson("pa-data")},_getRemote:function(t){var n=this._getSet(t);return{version:t.version,id:t.id,orientation:t.orientation,templates:t.templates,apps:t.sets[n]||t.sets.default,configs:t.configs[n]||t.configs.default}},_getSet:function(t){for(var n in t.rules)if(this._matchRule(t.rules[n]))return t.rules[n].set||n},_matchRule:function(t){for(var n in t){var e=this._getUserValue(n),i=r.isArray(t[n])?t[n]:[t[n]];if(e&&!i.includes(e))return!1}return!0},_getUserValue:function(t){switch(t){case"locale":return FBInstant.getLocale();case"lang":return FBInstant.getLocale().split("_").first();case"user":return FBInstant.player.getID()}}}),cc._RF.pop()},{JS:"JS",Settings:"Settings"}],PAInter:[function(t,n,e){"use strict";cc._RF.push(n,"b2d92hgAz1FO6Hp6fCN+d09","PAInter");var r=t("PAManager"),i=t("UI");cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,play:cc.Sprite},showAsync:function(t,n){var e=this;return new Promise(function(r,o){i.on(e.node,"click",t),i.on(e.node,"close",function(t){i.remove(e.node),n&&n(t),r()})})},setDataAsync:function(t){var n=this;this.data=t;var e=t.screenshot?i.spriteAsync(this.bg,t.screenshot):Promise.resolve(),r=t.button?i.spriteAsync(this.play,t.button.image).then(function(){i.pos(n.play.node,cc.v2(t.button.x,t.button.y))}):Promise.resolve();return Promise.all([e,r]).then(function(){n.updateLayout()})},updateLayout:function(){var t=cc.winSize,n=i.size(this.bg.node),e=t.width/n.width,r=t.height/n.height;i.size(this.node,cc.size(t.width/r,n.height)),i.scale(this.node,r),i.scale(this.bg.node,Math.max(e,r)/r)},onClose:function(){i.emit(this.node,"close")},onPlay:function(){var t=this;i.emit(this.node,"click");var n={"src-game":r.active.getSrcId()};FBInstant.switchGameAsync(this.data.id,n).then(function(){i.emit(t.node,"close")},function(n){i.emit(t.node,"close",!0)})}}),cc._RF.pop()},{PAManager:"PAManager",UI:"UI"}],PAManager:[function(t,n,e){"use strict";cc._RF.push(n,"18b19tsJmtIOLt0vsHIIxs+","PAManager");var r=t("PAConfigs"),i=t("JS"),o=t("UI"),s=cc.Class({extends:cc.Component,onLoad:function(){this.prefabs={},s.active=this},getSrcId:function(){return this.configs?this.configs.getSrcId():""},reset:function(){this.configs&&this.configs.reset()},initAsync:function(t,n,e){var i=this;return this.bundle=t,this.id=n,this.url=e,Resources.loadJsonAsync(this.url).then(function(t){t.disabled||(i.configs=new r(t),i.loadInterAsync())})},loadInterAsync:function(){var t=this;if(this.interInstance)return Promise.resolve(this.interInstance);if(this.interLoading)return Promise.reject({reason:"PA_INTER_LOADING"});var n=this.configs.loadInter();return n?(this.interLoading=!0,this.loadInterPrefabAsync(n.type).then(function(e){var r=o.create(e,"PAInter");return r.id=n.id,n.data?r.setDataAsync(n.data).then(function(){return t.interInstance=r}):Promise.resolve(t.interInstance=r)}).finally(function(){return t.interLoading=!1})):Promise.reject({reason:"PA_INTER_NOT_AVAILABLE"})},loadInterPrefabAsync:function(t){var n=this;return this.prefabs[t]?Promise.resolve(this.prefabs[t]):this.bundle.loadAsync(i.format("apps/%s",t),cc.Prefab).then(function(e){return n.prefabs[t]=e})},showInterAsync:function(){var t=this;this.configs.updateInterCount();var n=this.configs.checkInterTurn();if(!n.isTurn)return Promise.reject({reason:"PA_INTER_NOT_IN_TURN",count:n.count,turns:n.turns});if(!this.interInstance)return Promise.reject({reason:"PA_INTER_NOT_LOADED"});var e=this.interInstance,r=e.id;return this.interInstance=null,this.loadInterAsync(),this.configs.showInter(r),FBInstant.logEvent("PA_INTER_SHOW",0,{id:r,count:this.configs.getInterCount()}),o.add(e.node,this.node),e.showAsync(function(){t.configs.clickInter(r),FBInstant.logEvent("PA_INTER_CLICK",0,{id:r})},function(t){t&&FBInstant.logEvent("PA_INTER_CANCEL",0,{id:r})})}});cc._RF.pop()},{JS:"JS",PAConfigs:"PAConfigs",UI:"UI"}],Settings:[function(t,n,e){"use strict";cc._RF.push(n,"9ceedGueqBA/oryUnRAFSxk","Settings");var r=t("JS");n.exports={has:function(t){return null!==cc.sys.localStorage.getItem(t)},getItem:function(t){return cc.sys.localStorage.getItem(t)},get:function(t,n){void 0===n&&(n="");var e=this.getItem(t);return r.isDefined(e)?e:n},getBool:function(t,n){void 0===n&&(n=!1);var e=this.getItem(t);return r.isDefined(e)?r.bool(e):n},getNum:function(t,n){void 0===n&&(n=0);var e=this.getItem(t);return r.isDefined(e)?r.number(e):n},getJson:function(t,n){var e=this.getItem(t);return e?r.isString(e)?JSON.parse(e):e:n},set:function(t,n){return void 0===n?cc.sys.localStorage.removeItem(t):r.isBool(n)?cc.sys.localStorage.setItem(t,n?"1":""):r.isNumber(n)||r.isString(n)?cc.sys.localStorage.setItem(t,n):cc.sys.localStorage.setItem(t,JSON.stringify(n)),n},inc:function(t){return this.set(t,this.getNum(t,0)+1)},remove:function(t){cc.sys.localStorage.removeItem(t)}},cc._RF.pop()},{JS:"JS"}],UI:[function(t,n,e){"use strict";cc._RF.push(n,"37843KkKqZEe4KgSs8FAK9/","UI");var r=t("JS");n.exports={create:function(t,n){var e=cc.instantiate(t);return n?this.component(e,n):e},parent:function(t,n){if(!r.isDefined(n))return t.getParent();t.setParent(n)},component:function(t,n,e){var r=t.getComponent(n);return!r&&e&&(r=new n,t.addComponent(r)),r},add:function(t,n){return t.parent?t.parent=n:n.addChild(t),t},remove:function(t,n){void 0===n&&(n=!0),t.removeFromParent(n)},emit:function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];t.emit.apply(t,[n].concat(r))},on:function(t,n,e){t.on(n,e)},pos:function(t,n){if(!r.isDefined(n))return t.getPosition();t.setPosition(n)},size:function(t,n){if(!r.isDefined(n))return t.getContentSize();t.setContentSize(n)},scale:function(t,n){if(!r.isDefined(n))return t.getScale();t.setScale(n)},scaleX:function(t,n){if(!r.isDefined(n))return t.scaleX;t.scaleX=n},scaleY:function(t,n){if(!r.isDefined(n))return t.scaleY;t.scaleY=n},sprite:function(t,n,e){isString(n)?Resources.loadAsync(n).then(function(n){t.spriteFrame=new cc.SpriteFrame(n),raise(e)}):isType(n,cc.SpriteFrame)?(t.spriteFrame=n,raise(e)):raise(e)},spriteAsync:function(t,n){var e=this;return new Promise(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.sprite.apply(e,[t,n].concat(i))})}},cc._RF.pop()},{JS:"JS"}]},{},["JS","Settings","UI","PAConfigs","PAInter","PAManager"]);